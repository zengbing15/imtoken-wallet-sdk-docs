"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[60],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(t),m=i,b=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return t?r.createElement(b,a(a({ref:n},c),{},{components:t})):r.createElement(b,a({ref:n},c))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var p=2;p<o;p++)a[p]=t[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},6507:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=t(7462),i=(t(7294),t(3905));const o={sidebar_position:2},a="Developement Guide",l={unversionedId:"developement",id:"developement",title:"Developement Guide",description:"Integrate with imToken DApp Browser",source:"@site/docs/developement.md",sourceDirName:".",slug:"/developement",permalink:"/webview-docs/developement",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"Introduction",permalink:"/webview-docs/"},next:{title:"Function",permalink:"/webview-docs/category/function"}},s={},p=[{value:"Integrate with imToken DApp Browser",id:"integrate-with-imtoken-dapp-browser",level:2},{value:"System Requirements",id:"system-requirements",level:3},{value:"Install imToken Webview",id:"install-imtoken-webview",level:3},{value:"Usage",id:"usage",level:3},{value:"Import",id:"import",level:4},{value:"Check the current usage environment",id:"check-the-current-usage-environment",level:4},{value:"Debug Tool",id:"debug-tool",level:2},{value:"Breaking Change",id:"breaking-change",level:2},{value:"No Longer Injecting web3.js",id:"no-longer-injecting-web3js",level:3},{value:"No longer adding fixed patch for web3.js send errors",id:"no-longer-adding-fixed-patch-for-web3js-send-errors",level:3}],c={toc:p};function d(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"developement-guide"},"Developement Guide"),(0,i.kt)("h2",{id:"integrate-with-imtoken-dapp-browser"},"Integrate with imToken DApp Browser"),(0,i.kt)("p",null,"With the imToken Webview ",(0,i.kt)("inlineCode",{parentName:"p"},"@consenlabs-fe/webview"),", the DApp side can use features that built in the imToken DApp Browser, such as integrating with imToken Wallet DApp Browser or adapting the DApp application. You can refer to ",(0,i.kt)("a",{parentName:"p",href:"/function/API"},"API")," for more usage."),(0,i.kt)("h3",{id:"system-requirements"},"System Requirements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Operating System: imToken Webview can be developed on all major platforms, including Linux, Windows, and macOS."),(0,i.kt)("li",{parentName:"ul"},"JavaScript runtime environment: Node.js LTS Version (>=12)"),(0,i.kt)("li",{parentName:"ul"},"JavaScript package manager: Yarn or npm")),(0,i.kt)("h3",{id:"install-imtoken-webview"},"Install imToken Webview"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ npm i @consenlabs-fe/webview\nor\n$ yarn add @consenlabs-fe/webview\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"@consenlabs-fe/webview")," is also available on ",(0,i.kt)("a",{parentName:"p",href:"https://unpkg.com/@consenlabs-fe/webview/dist/index.js"},"unpkg")," and ",(0,i.kt)("a",{parentName:"p",href:"https://cdn.jsdelivr.net/npm/@consenlabs-fe/webview/dist/index.min.js"},"jsdelivr"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="CDN"',title:'"CDN"'},'<script src="https://cdn.jsdelivr.net/npm/@consenlabs-fe/webview/dist/index.min.js" />\n')),(0,i.kt)("h3",{id:"usage"},"Usage"),(0,i.kt)("h4",{id:"import"},"Import"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"import TokenWebView from '@consenlabs-fe/webview'\n")),(0,i.kt)("h4",{id:"check-the-current-usage-environment"},"Check the current usage environment"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"if (TokenWebView.isTokenEnv()) {\n  TokenWebView.apis.navigator.setTitle('hello world')\n}\n")),(0,i.kt)("h2",{id:"debug-tool"},"Debug Tool"),(0,i.kt)("p",null,"There is a ",(0,i.kt)("a",{parentName:"p",href:"https://webview-demo.vercel.app/"},"demo")," to help you debug. You can open this demo on your mobile device to check the API usage."),(0,i.kt)("h2",{id:"breaking-change"},"Breaking Change"),(0,i.kt)("h3",{id:"no-longer-injecting-web3js"},"No Longer Injecting web3.js"),(0,i.kt)("p",null,"Since 2021 ,imToken Wallet have no longer inject ",(0,i.kt)("inlineCode",{parentName:"p"},"web3.js"),".The DApp should package the library by itself.You can refer to ",(0,i.kt)("a",{parentName:"p",href:"https://medium.com/metamask/no-longer-injecting-web3-js-4a899ad6e59e"},"this article")," for more details."),(0,i.kt)("h3",{id:"no-longer-adding-fixed-patch-for-web3js-send-errors"},"No longer adding fixed patch for web3.js send errors"),(0,i.kt)("p",null,"There is a bug in web3.js version 1.3.0 ,which is the ",(0,i.kt)("inlineCode",{parentName:"p"},"send")," function cannot be found(",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ChainSafe/web3.js/issues/3790"},"issue#3790"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ChainSafe/web3.js/pull/3649#issuecomment-695200876"},"PR#3649"),"). The error log:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Uncaught (in promise) TypeError: this.send is not a function\n// or\nTypeError: this._eip1193Send is not a function. (In 'this._eip1193Send(payload.method, payload.params)', 'this._eip1193Send' is undefined)\n")),(0,i.kt)("p",null,"Because of some side effects, since imToken Wallet v2.9.4, the fixed patch has no longer been applied. It is recommended that upgrade ",(0,i.kt)("inlineCode",{parentName:"p"},"web3.js")," to fix this bug."))}d.isMDXComponent=!0}}]);